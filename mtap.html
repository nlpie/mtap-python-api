
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>mtap &#8212; MTAP 1.0.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxdoc.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="mtap.deployment" href="deployment.html" />
    <link rel="prev" title="Welcome to MTAP’s documentation!" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="deployment.html" title="mtap.deployment"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to MTAP’s documentation!"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">MTAP 1.0.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">mtap</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-mtap">
<span id="mtap"></span><h1><a class="toc-backref" href="#id1" role="doc-backlink">mtap</a><a class="headerlink" href="#module-mtap" title="Permalink to this heading">¶</a></h1>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#module-mtap" id="id1">mtap</a></p>
<ul>
<li><p><a class="reference internal" href="#command-line-utility" id="id2">Command-Line Utility</a></p>
<ul>
<li><p><a class="reference internal" href="#running-events-service" id="id3">Running Events Service</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#api-documentation" id="id4">API Documentation</a></p>
<ul>
<li><p><a class="reference internal" href="#events-service-client-documents" id="id5">Events service client, documents</a></p></li>
<li><p><a class="reference internal" href="#labels" id="id6">Labels</a></p></li>
<li><p><a class="reference internal" href="#label-indices" id="id7">Label Indices</a></p></li>
<li><p><a class="reference internal" href="#custom-label-types" id="id8">Custom Label Types</a></p></li>
<li><p><a class="reference internal" href="#creating-processors" id="id9">Creating Processors</a></p></li>
<li><p><a class="reference internal" href="#processor-description-decorators" id="id10">Processor Description Decorators</a></p></li>
<li><p><a class="reference internal" href="#running-services" id="id11">Running Services</a></p></li>
<li><p><a class="reference internal" href="#running-a-pipeline" id="id12">Running a pipeline</a></p></li>
<li><p><a class="reference internal" href="#configuration" id="id13">Configuration</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<section id="command-line-utility">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Command-Line Utility</a><a class="headerlink" href="#command-line-utility" title="Permalink to this heading">¶</a></h2>
<section id="running-events-service">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">Running Events Service</a><a class="headerlink" href="#running-events-service" title="Permalink to this heading">¶</a></h3>
<p>usage:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>python -m mtap events [-h] [--address ADDRESS] [--port PORT]
                         [--workers WORKERS] [--register] [--config CONFIG]

optional arguments:
 -h, --help            show this help message and exit
 --address ADDRESS, -a ADDRESS
                       the address to serve the service on
 --port PORT, -p PORT  the port to serve the service on
 --workers WORKERS, -w WORKERS
                       number of worker threads to handle requests
 --register, -r        whether to register the service with the configured
                       service discovery
 --config CONFIG, -c CONFIG
                       path to config file
</pre></div>
</div>
</section>
</section>
<section id="api-documentation">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">API Documentation</a><a class="headerlink" href="#api-documentation" title="Permalink to this heading">¶</a></h2>
<section id="events-service-client-documents">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Events service client, documents</a><a class="headerlink" href="#events-service-client-documents" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="mtap.EventsClient">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.</span></span><span class="sig-name descname"><span class="pre">EventsClient</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">address</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel_factory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_pool</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_channel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_events.html#EventsClient"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.EventsClient" title="Permalink to this definition">¶</a></dt>
<dd><p>A client object for interacting with the events service.</p>
<p>Normally, users shouldn’t have to use any of the methods on this object, as they are invoked by
the globally distributed object classes of <a class="reference internal" href="#mtap.Event" title="mtap.Event"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Event</span></code></a>, <a class="reference internal" href="#mtap.Document" title="mtap.Document"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Document</span></code></a>, and <a class="reference internal" href="#mtap.data.Labeler" title="mtap.data.Labeler"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Labeler</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>address</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em>) – The events service target e.g. ‘localhost:9090’ or
omit/None to use service discovery.</p></li>
<li><p><strong>stub</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><em>EventsStub</em><em>]</em>) – An existing events service
client gRPC stub to use.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">EventsClient</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s1">&#39;localhost:50000&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">,</span> \
<span class="gp">&gt;&gt;&gt; </span>     <span class="n">Event</span><span class="p">(</span><span class="n">event_id</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span> <span class="k">as</span> <span class="n">event</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">document</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">create_document</span><span class="p">(</span><span class="n">document_name</span><span class="o">=</span><span class="s1">&#39;plaintext&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                                     <span class="n">text</span><span class="o">=</span><span class="s1">&#39;The quick brown fox jumps over the lazy dog.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mtap.Event">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.</span></span><span class="sig-name descname"><span class="pre">Event</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_service_instance_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">only_create_new</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_adapters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_events.html#Event"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.Event" title="Permalink to this definition">¶</a></dt>
<dd><p>An object for interacting with a specific event locally or on the events service.</p>
<p>The Event object functions as a map from string document names to <a class="reference internal" href="#mtap.Document" title="mtap.Document"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Document</span></code></a> objects that
can be used to access document data from the events server.</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em>) – A globally-unique identifier for the event, or omit / none for a random UUID.</p></li>
<li><p><strong>client</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference internal" href="#mtap.EventsClient" title="mtap.EventsClient"><em>EventsClient</em></a><em>]</em>) – A client for an events service to push any changes to the event to.</p></li>
<li><p><strong>only_create_new</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Fails if the event already exists on the events service.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">EventsClient</span><span class="p">()</span> <span class="k">as</span> <span class="n">c</span><span class="p">,</span> <span class="n">Event</span><span class="p">(</span><span class="n">event_id</span><span class="o">=</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">c</span><span class="p">)</span> <span class="k">as</span> <span class="n">event</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="c1"># use event</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="o">...</span>
</pre></div>
</div>
<dl class="py property">
<dt class="sig sig-object py" id="mtap.Event.event_id">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">event_id</span></span><a class="headerlink" href="#mtap.Event.event_id" title="Permalink to this definition">¶</a></dt>
<dd><p>The globally unique identifier for this event.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mtap.Event.event_service_instance_id">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">event_service_instance_id</span></span><a class="headerlink" href="#mtap.Event.event_service_instance_id" title="Permalink to this definition">¶</a></dt>
<dd><p>The unique instance identifier for this event’s paired event service.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mtap.Event.documents">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">documents</span></span><a class="headerlink" href="#mtap.Event.documents" title="Permalink to this definition">¶</a></dt>
<dd><p>A mutable mapping of strings to <a class="reference internal" href="#mtap.Document" title="mtap.Document"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Document</span></code></a>
objects that can be used to query and add documents to the event.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.MutableMapping" title="(in Python v3.11)"><em>MutableMapping</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>, <a class="reference internal" href="#mtap.Document" title="mtap.Document">Document</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mtap.Event.metadata">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">metadata</span></span><a class="headerlink" href="#mtap.Event.metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>A mutable mapping of strings to strings that can be
used to query and add metadata to the event.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.MutableMapping" title="(in Python v3.11)"><em>MutableMapping</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mtap.Event.binaries">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">binaries</span></span><a class="headerlink" href="#mtap.Event.binaries" title="Permalink to this definition">¶</a></dt>
<dd><p>A mutable mapping of strings to bytes that can be used
to query and add binary data to the event.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.MutableMapping" title="(in Python v3.11)"><em>MutableMapping</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mtap.Event.created_indices">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">created_indices</span></span><a class="headerlink" href="#mtap.Event.created_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>A mapping of document names to a list of the names
of all the label indices that have been added to that document</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><em>Dict</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.11)"><em>List</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.Event.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_events.html#Event.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.Event.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes this event. Lets the event service know that we are done with the event,
allowing to clean up the event if no other clients have open leases to it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.Event.create_document">
<span class="sig-name descname"><span class="pre">create_document</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">document_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_events.html#Event.create_document"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.Event.create_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a document to the event keyed by <cite>document_name</cite> and
containing the specified <cite>text</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>document_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The event-unique identifier for the document, example: ‘plaintext’.</p></li>
<li><p><strong>text</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The content of the document. This is a required field, document text is final and
immutable, as changing the text would very likely invalidate any labels on the
document.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The added document.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.Document" title="mtap.Document">Document</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">event</span> <span class="o">=</span> <span class="n">Event</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">create_document</span><span class="p">(</span><span class="s1">&#39;plaintext&#39;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;The text of the document.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.Event.add_document">
<span class="sig-name descname"><span class="pre">add_document</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">document</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_events.html#Event.add_document"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.Event.add_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the document to this event, first uploading to events service if this event has a
client connection to the events service.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>document</strong> (<a class="reference internal" href="#mtap.Document" title="mtap.Document"><em>Document</em></a>) – The document to add to this event.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">event</span> <span class="o">=</span> <span class="n">Event</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="s1">&#39;plaintext&#39;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;The text of the document.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">event</span><span class="o">.</span><span class="n">add_document</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mtap.Document">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.</span></span><span class="sig-name descname"><span class="pre">Document</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">document_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_adapters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_events.html#Document"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.Document" title="Permalink to this definition">¶</a></dt>
<dd><p>An object for interacting with text and labels stored on an <a class="reference internal" href="#mtap.Event" title="mtap.Event"><code class="xref py py-class docutils literal notranslate"><span class="pre">Event</span></code></a>.</p>
<p>Documents are keyed by their name, and pipelines can store different pieces of
related text on a single processing event using multiple documents. An example would be storing
the text of one language on one document, and a translation on another, or storing the
rtf or html encoding on one document, and the parsed plaintext on another document.</p>
<p>Both the document text and any added label indices are immutable. This is to enable
parallelization and distribution of processing, and to prevent changes to the dependency graph
of label indices and text, which can make debugging difficult.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>document_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The document name identifier.</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>text</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em>) – The document text, can be omitted if this is an existing document and text needs to be
retrieved from the events service.</p></li>
<li><p><strong>event</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference internal" href="#mtap.Event" title="mtap.Event"><em>Event</em></a><em>]</em>) – The parent event of this document. If the event has a client, then that client will be
used to share changes to this document with all other clients of the Events service. In
that case, text should only be specified if it is the known existing text of the
document.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Local document:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="s1">&#39;plaintext&#39;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Some document text.&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Existing distributed object:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">EventsClient</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s1">&#39;localhost:8080&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">,</span> \
<span class="gp">&gt;&gt;&gt; </span>     <span class="n">Event</span><span class="p">(</span><span class="n">event_id</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span> <span class="k">as</span> <span class="n">event</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">document</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">documents</span><span class="p">[</span><span class="s1">&#39;plaintext&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">document</span><span class="o">.</span><span class="n">text</span>
<span class="go">&#39;Some document text fetched from the server.&#39;</span>
</pre></div>
</div>
<p>New distributed object:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">EventsClient</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s1">&#39;localhost:8080&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">,</span> \
<span class="gp">&gt;&gt;&gt; </span>     <span class="n">Event</span><span class="p">(</span><span class="n">event_id</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span> <span class="k">as</span> <span class="n">event</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">document</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="s1">&#39;plaintext&#39;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Some document text.&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">event</span><span class="o">.</span><span class="n">add_document</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
</pre></div>
</div>
<p>or</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">EventsClient</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s1">&#39;localhost:8080&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">,</span> \
<span class="gp">&gt;&gt;&gt; </span>     <span class="n">Event</span><span class="p">(</span><span class="n">event_id</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span> <span class="k">as</span> <span class="n">event</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">document</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">create_document</span><span class="p">(</span><span class="s1">&#39;plaintext&#39;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Some document text.&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py property">
<dt class="sig sig-object py" id="mtap.Document.event">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">event</span></span><a class="headerlink" href="#mtap.Document.event" title="Permalink to this definition">¶</a></dt>
<dd><p>The parent event of this document.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.Event" title="mtap.Event">Event</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mtap.Document.document_name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">document_name</span></span><a class="headerlink" href="#mtap.Document.document_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The unique identifier for this document on the event.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mtap.Document.text">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">text</span></span><a class="headerlink" href="#mtap.Document.text" title="Permalink to this definition">¶</a></dt>
<dd><p>The document text.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mtap.Document.created_indices">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">created_indices</span></span><a class="headerlink" href="#mtap.Document.created_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of all of the label index names that have created on this
document using a labeler either locally or by remote pipeline components invoked on
this document.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.11)"><em>List</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.Document.get_label_index">
<span class="sig-name descname"><span class="pre">get_label_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label_index_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_events.html#Document.get_label_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.Document.get_label_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the document’s label index with the specified key.</p>
<p>Will fetch from the events service if it is not cached locally if the document has an event
with a client. Uses the <cite>label_adapter</cite> argument to perform unmarshalling from the proto
message if specified.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>label_index_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The name of the label index to get.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The requested label index.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.data.LabelIndex" title="mtap.data.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.Document.get_labeler">
<span class="sig-name descname"><span class="pre">get_labeler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label_index_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distinct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_events.html#Document.get_labeler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.Document.get_labeler" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a function that can be used to add labels to a label index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>label_index_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – A document-unique identifier for the label index to be created.</p></li>
<li><p><strong>distinct</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em>) – Optional, if using generic labels, whether to use distinct generic labels or
non-distinct generic labels, will default to False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A callable when used in conjunction with the ‘with’ keyword will automatically
handle uploading any added labels to the server.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.data.Labeler" title="mtap.data.Labeler">Labeler</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">document</span><span class="o">.</span><span class="n">get_labeler</span><span class="p">(</span><span class="s1">&#39;sentences&#39;</span><span class="p">,</span> <span class="n">distinct</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">labeler</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">labeler</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="n">sentence_type</span><span class="o">=</span><span class="s1">&#39;STANDARD&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">sentence</span> <span class="o">=</span> <span class="n">labeler</span><span class="p">(</span><span class="mi">26</span><span class="p">,</span> <span class="mi">34</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">sentence</span><span class="o">.</span><span class="n">sentence_type</span> <span class="o">=</span> <span class="s1">&#39;FRAGMENT&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.Document.add_labels">
<span class="sig-name descname"><span class="pre">add_labels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label_index_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distinct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_adapter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_events.html#Document.add_labels"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.Document.add_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Skips using a labeler and adds the sequence of labels as a new label index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>label_index_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The name of the label index.</p></li>
<li><p><strong>labels</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference internal" href="#mtap.data.Label" title="mtap.data.Label"><em>Label</em></a><em>]</em>) – The labels to add.</p></li>
<li><p><strong>distinct</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em>) – Whether the index is distinct or non-distinct.</p></li>
<li><p><strong>label_adapter</strong> (<em>mtap.label_adapters.ProtoLabelAdapter</em>) – A label adapter to use.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The new label index created from the labels.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.data.LabelIndex" title="mtap.data.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mtap.data.Labeler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.data.</span></span><span class="sig-name descname"><span class="pre">Labeler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_index_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_adapter</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_events.html#Labeler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.Labeler" title="Permalink to this definition">¶</a></dt>
<dd><p>Object provided by <code class="xref py py-func docutils literal notranslate"><span class="pre">get_labeler()</span></code> which is responsible for adding labels
to a label index on a document.</p>
<dl class="py method">
<dt class="sig sig-object py" id="mtap.data.Labeler.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_events.html#Labeler.__call__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.Labeler.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the constructor for the label type adding it to the list of labels to be uploaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – Arguments passed to the label type’s constructor.</p></li>
<li><p><strong>kwargs</strong> – Keyword arguments passed to the label type’s constructor.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The object that was created by the label type’s constructor.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.data.Label" title="mtap.data.Label">Label</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">labeler</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="n">some_field</span><span class="o">=</span><span class="s1">&#39;some_value&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="go">GenericLabel(start_index=0, end_index=25, some_field=&#39;some_value&#39;, x=3)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.data.Labeler.done">
<span class="sig-name descname"><span class="pre">done</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_events.html#Labeler.done"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.Labeler.done" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalizes the label index, uploads the added labels to the events service.</p>
<p>Normally called automatically on exit from a context manager block, but can be manually
invoked if the labeler is not used in a context manager block.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mtap.data.LabelIndexInfo">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.data.</span></span><span class="sig-name descname"><span class="pre">LabelIndexInfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mtap.data.LabelIndexInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Information about a label index contained on a document.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.data.LabelIndexInfo.index_name">
<span class="sig-name descname"><span class="pre">index_name</span></span><a class="headerlink" href="#mtap.data.LabelIndexInfo.index_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the label index.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.data.LabelIndexInfo.type">
<span class="sig-name descname"><span class="pre">type</span></span><a class="headerlink" href="#mtap.data.LabelIndexInfo.type" title="Permalink to this definition">¶</a></dt>
<dd><p>The type of the label index.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.data.LabelIndexType" title="mtap.data.LabelIndexType">LabelIndexType</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mtap.data.LabelIndexType">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.data.</span></span><span class="sig-name descname"><span class="pre">LabelIndexType</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qualname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundary</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_base.html#LabelIndexType"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.LabelIndexType" title="Permalink to this definition">¶</a></dt>
<dd><p>The type of serialized labels contained in the label index.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.data.LabelIndexType.UNKNOWN">
<span class="sig-name descname"><span class="pre">UNKNOWN</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#mtap.data.LabelIndexType.UNKNOWN" title="Permalink to this definition">¶</a></dt>
<dd><p>Label index not set or type not known.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.data.LabelIndexType.GENERIC">
<span class="sig-name descname"><span class="pre">GENERIC</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#mtap.data.LabelIndexType.GENERIC" title="Permalink to this definition">¶</a></dt>
<dd><p>JSON / Generic Label index</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.data.LabelIndexType.CUSTOM">
<span class="sig-name descname"><span class="pre">CUSTOM</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#mtap.data.LabelIndexType.CUSTOM" title="Permalink to this definition">¶</a></dt>
<dd><p>Other / custom protobuf label index</p>
</dd></dl>

</dd></dl>

</section>
<section id="labels">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Labels</a><a class="headerlink" href="#labels" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="mtap.data.Label">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.data.</span></span><span class="sig-name descname"><span class="pre">Label</span></span><a class="reference internal" href="_modules/mtap/data/_labels.html#Label"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.Label" title="Permalink to this definition">¶</a></dt>
<dd><p>An abstract base class for a label of attributes on text.</p>
<dl class="py property">
<dt class="sig sig-object py" id="mtap.data.Label.document">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">document</span></span><a class="headerlink" href="#mtap.data.Label.document" title="Permalink to this definition">¶</a></dt>
<dd><p>The parent document this label appears on.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.Document" title="mtap.Document">Document</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mtap.data.Label.label_index_name">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">label_index_name</span></span><a class="headerlink" href="#mtap.data.Label.label_index_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The label index this label appears on.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mtap.data.Label.identifier">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">identifier</span></span><a class="headerlink" href="#mtap.data.Label.identifier" title="Permalink to this definition">¶</a></dt>
<dd><p>The index of the label within its label index.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mtap.data.Label.start_index">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">start_index</span></span><a class="headerlink" href="#mtap.data.Label.start_index" title="Permalink to this definition">¶</a></dt>
<dd><p>The index of the first character of the text covered by this label.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mtap.data.Label.end_index">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">end_index</span></span><a class="headerlink" href="#mtap.data.Label.end_index" title="Permalink to this definition">¶</a></dt>
<dd><p>The index after the last character of the text covered by this label.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mtap.data.Label.location">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">location</span></span><a class="headerlink" href="#mtap.data.Label.location" title="Permalink to this definition">¶</a></dt>
<dd><p>A tuple of (start_index, end_index) used to perform sorting and
comparison first based on start_index, then based on end_index.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.data.Location" title="mtap.data.Location">Location</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mtap.data.Label.text">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">text</span></span><a class="headerlink" href="#mtap.data.Label.text" title="Permalink to this definition">¶</a></dt>
<dd><p>The slice of document text covered by this label. Will retrieve from events server
if it is not cached locally.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.data.Label.shallow_fields_equal">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">shallow_fields_equal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_labels.html#Label.shallow_fields_equal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.Label.shallow_fields_equal" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if the fields on this label and locations of references are the same as another
label.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> – The other label to test.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if all of the fields are equal and the references are at the same locations.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mtap.data.Location">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.data.</span></span><span class="sig-name descname"><span class="pre">Location</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start_index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_index</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_labels.html#Location"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.Location" title="Permalink to this definition">¶</a></dt>
<dd><p>A location in text, a tuple of (<cite>start_index</cite>, <cite>end_index</cite>).</p>
<p>Used to perform comparison of labels based on their locations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start_index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – The start index inclusive of the location in text.</p></li>
<li><p><strong>end_index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – The end index exclusive of the location in text.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.data.Location.start_index">
<span class="sig-name descname"><span class="pre">start_index</span></span><a class="headerlink" href="#mtap.data.Location.start_index" title="Permalink to this definition">¶</a></dt>
<dd><p>The start index inclusive of the location in text.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.data.Location.end_index">
<span class="sig-name descname"><span class="pre">end_index</span></span><a class="headerlink" href="#mtap.data.Location.end_index" title="Permalink to this definition">¶</a></dt>
<dd><p>The end index exclusive of the location in text.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.data.Location.covers">
<span class="sig-name descname"><span class="pre">covers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_labels.html#Location.covers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.Location.covers" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the span of text covered by this label completely overlaps the span of text
covered by the <code class="docutils literal notranslate"><span class="pre">other</span></code> label or location.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference internal" href="#mtap.data.Location" title="mtap.data.Location"><em>Location</em></a><em>, </em><a class="reference internal" href="#mtap.data.Label" title="mtap.data.Label"><em>Label</em></a><em>]</em>) – A location or label to compare against.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if <cite>other</cite> is completely overlapped/covered <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.data.Location.relative_to">
<span class="sig-name descname"><span class="pre">relative_to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">location</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_labels.html#Location.relative_to"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.Location.relative_to" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a location relative to the the same origin as <code class="docutils literal notranslate"><span class="pre">location</span></code> and makes it relative
to <code class="docutils literal notranslate"><span class="pre">location</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>location</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em> or </em><a class="reference internal" href="#mtap.data.Location" title="mtap.data.Location"><em>Location</em></a><em> or </em><a class="reference internal" href="#mtap.data.Label" title="mtap.data.Label"><em>Label</em></a>) – A location to relativize this location to.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A copy with updated indices.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.data.Location" title="mtap.data.Location"><em>Location</em></a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sentence</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">token</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">token</span><span class="o">.</span><span class="n">relative_to</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
<span class="go">Location(start_index=0, end_index=5)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.data.Location.offset_by">
<span class="sig-name descname"><span class="pre">offset_by</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">location</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_labels.html#Location.offset_by"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.Location.offset_by" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a location by offsetting this location by an integer or the <code class="docutils literal notranslate"><span class="pre">start_index</span></code> of a
location / label. Derelativizes this location.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>location</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em> or </em><a class="reference internal" href="#mtap.data.Location" title="mtap.data.Location"><em>Location</em></a><em> or </em><a class="reference internal" href="#mtap.data.Label" title="mtap.data.Label"><em>Label</em></a>) – A location to offset this location by.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A copy with updated indices.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.data.Location" title="mtap.data.Location"><em>Location</em></a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sentence</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">token_in_sentence</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">token_in_sentence</span><span class="o">.</span><span class="n">offset_by</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
<span class="go">Location(start_index=10, end_index=15)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mtap.label">
<span class="sig-prename descclassname"><span class="pre">mtap.</span></span><span class="sig-name descname"><span class="pre">label</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start_index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_index</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_labels.html#label"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.label" title="Permalink to this definition">¶</a></dt>
<dd><p>An alias for <a class="reference internal" href="#mtap.GenericLabel" title="mtap.GenericLabel"><code class="xref py py-class docutils literal notranslate"><span class="pre">GenericLabel</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start_index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The index of the first character in text to be included in the label.</p></li>
<li><p><strong>end_index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The index after the last character in text to be included in the label.</p></li>
<li><p><strong>document</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference internal" href="#mtap.Document" title="mtap.Document"><em>Document</em></a><em>]</em>) – The parent document of the label. This will be
automatically set if a the label is created via labeler.</p></li>
<li><p><strong>**kwargs</strong> – Arbitrary, any other fields that should be added to the label, values must be
json-serializable.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mtap.GenericLabel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.</span></span><span class="sig-name descname"><span class="pre">GenericLabel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start_index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_index</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identifier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_index_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference_field_ids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_labels.html#GenericLabel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.GenericLabel" title="Permalink to this definition">¶</a></dt>
<dd><p>Default implementation of the Label class which uses a dictionary to store attributes.</p>
<p>Will be suitable for the majority of use cases for labels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start_index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The index of the first character in text to be included in the label.</p></li>
<li><p><strong>end_index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The index after the last character in text to be included in the label.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>document</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference internal" href="#mtap.Document" title="mtap.Document"><em>Document</em></a><em>]</em>) – The parent document of the label. This will be
automatically set if a the label is created via labeler.</p></li>
<li><p><strong>**kwargs</strong> – Arbitrary, any other fields that should be added to the label, values must be
json-serializable.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pos_tag</span> <span class="o">=</span> <span class="n">pos_tag_labeler</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pos_tag</span><span class="o">.</span><span class="n">tag</span> <span class="o">=</span> <span class="s1">&#39;NNS&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pos_tag</span><span class="o">.</span><span class="n">tag</span>
<span class="go">&#39;NNS&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pos_tag2</span> <span class="o">=</span> <span class="n">pos_tag_labeler</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;VB&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pos_tag2</span><span class="o">.</span><span class="n">tag</span>
<span class="go">&#39;VB&#39;</span>
</pre></div>
</div>
<dl class="py property">
<dt class="sig sig-object py" id="mtap.GenericLabel.document">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">document</span></span><a class="headerlink" href="#mtap.GenericLabel.document" title="Permalink to this definition">¶</a></dt>
<dd><p>The parent document this label appears on.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.Document" title="mtap.Document">Document</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mtap.GenericLabel.label_index_name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">label_index_name</span></span><a class="headerlink" href="#mtap.GenericLabel.label_index_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The label index this label appears on.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mtap.GenericLabel.identifier">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">identifier</span></span><a class="headerlink" href="#mtap.GenericLabel.identifier" title="Permalink to this definition">¶</a></dt>
<dd><p>The index of the label within its label index.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mtap.GenericLabel.start_index">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">start_index</span></span><a class="headerlink" href="#mtap.GenericLabel.start_index" title="Permalink to this definition">¶</a></dt>
<dd><p>The index of the first character of the text covered by this label.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mtap.GenericLabel.end_index">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">end_index</span></span><a class="headerlink" href="#mtap.GenericLabel.end_index" title="Permalink to this definition">¶</a></dt>
<dd><p>The index after the last character of the text covered by this label.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.GenericLabel.shallow_fields_equal">
<span class="sig-name descname"><span class="pre">shallow_fields_equal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_labels.html#GenericLabel.shallow_fields_equal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.GenericLabel.shallow_fields_equal" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if the fields on this label and locations of references are the same as another
label.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> – The other label to test.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if all of the fields are equal and the references are at the same locations.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="label-indices">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Label Indices</a><a class="headerlink" href="#label-indices" title="Permalink to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="mtap.label_index">
<span class="sig-prename descclassname"><span class="pre">mtap.</span></span><span class="sig-name descname"><span class="pre">label_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">labels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distinct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adapter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_label_indices.html#label_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.label_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a label index from labels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>labels</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.11)"><em>List</em></a><em>[</em><em>L</em><em>]</em>) – Zero or more labels to create a label index from.</p></li>
<li><p><strong>distinct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether the label index is distinct or not.</p></li>
<li><p><strong>adapter</strong> (<a class="reference internal" href="#mtap.data.ProtoLabelAdapter" title="mtap.data.ProtoLabelAdapter"><em>ProtoLabelAdapter</em></a>) – The label adapter for these labels.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The newly created label index.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.data.LabelIndex" title="mtap.data.LabelIndex"><em>LabelIndex</em></a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap</span> <span class="kn">import</span> <span class="n">label_index</span><span class="p">,</span> <span class="n">label</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">label_index</span><span class="p">([</span><span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">6</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span>
<span class="go">label_index([GenericLabel(0, 5, x=1), GenericLabel(0, 10, x=2), GenericLabel(5, 10, x=3),</span>
<span class="go">             GenericLabel(5, 15, x=5), GenericLabel(7, 10, x=4), GenericLabel(10, 15, x=6)], distinct=False)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mtap.data.LabelIndex">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.data.</span></span><span class="sig-name descname"><span class="pre">LabelIndex</span></span><a class="reference internal" href="_modules/mtap/data/_label_indices.html#LabelIndex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.LabelIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>An immutable <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Sequence</span></code></a> of labels ordered by their location in text. By default
sorts by ascending <cite>start_index</cite> and then by ascending <cite>end_index</cite>.</p>
<dl class="py property">
<dt class="sig sig-object py" id="mtap.data.LabelIndex.distinct">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">distinct</span></span><a class="headerlink" href="#mtap.data.LabelIndex.distinct" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether this label index is distinct, i.e. all of the labels in it are
non-overlapping.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.data.LabelIndex.filter">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_label_indices.html#LabelIndex.filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.LabelIndex.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters the label index according to a filter function.</p>
<p>This function is less efficient for filtering based on indices than
<a class="reference internal" href="#mtap.data.LabelIndex.inside" title="mtap.data.LabelIndex.inside"><code class="xref py py-func docutils literal notranslate"><span class="pre">inside()</span></code></a>, <a class="reference internal" href="#mtap.data.LabelIndex.covering" title="mtap.data.LabelIndex.covering"><code class="xref py py-func docutils literal notranslate"><span class="pre">covering()</span></code></a>, etc., which use a binary search
method on the sorted index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fn</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><em>[</em><a class="reference internal" href="#mtap.data.Label" title="mtap.data.Label"><em>Label</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em>) – A filter function, returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if the label
should be included, <code class="docutils literal notranslate"><span class="pre">false</span></code> if it should not be included</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A view of this label index.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.data.LabelIndex" title="mtap.data.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.data.LabelIndex.at">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">at</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_label_indices.html#LabelIndex.at"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.LabelIndex.at" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the labels at the specified location in text.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference internal" href="#mtap.data.Label" title="mtap.data.Label"><em>Label</em></a><em>, </em><a class="reference internal" href="#mtap.data.Location" title="mtap.data.Location"><em>Location</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – A label or location, or start index if <cite>end</cite>
is specified.</p></li>
<li><p><strong>end</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – The exclusive end index of the location in text if it has
not been specified by a label.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A view of this label index.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.data.LabelIndex" title="mtap.data.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap</span> <span class="kn">import</span> <span class="n">label_index</span><span class="p">,</span> <span class="n">label</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">label_index</span><span class="p">([</span><span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="go">label_index([GenericLabel(0, 10, x=1), GenericLabel(0, 10, x=2)], distinct=False)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.data.LabelIndex.covering">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">covering</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_label_indices.html#LabelIndex.covering"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.LabelIndex.covering" title="Permalink to this definition">¶</a></dt>
<dd><p>A label index containing all labels that cover / contain the specified location in text.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><em>Label'</em><em>, </em><em>Location'</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – A label or location, or start
index if <cite>end</cite> is specified.</p></li>
<li><p><strong>end</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – The exclusive end index of the location in text if it has
not been specified by a label.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A view of this label index.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.data.LabelIndex" title="mtap.data.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap</span> <span class="kn">import</span> <span class="n">label_index</span><span class="p">,</span> <span class="n">label</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">label_index</span><span class="p">([</span><span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">6</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">.</span><span class="n">covering</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="go">label_index([GenericLabel(0, 10, x=2), GenericLabel(5, 10, x=3), GenericLabel(5, 15, x=5)], distinct=False)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.data.LabelIndex.inside">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">inside</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_label_indices.html#LabelIndex.inside"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.LabelIndex.inside" title="Permalink to this definition">¶</a></dt>
<dd><p>A label index containing all labels that are inside the specified location in text.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><em>Label'</em><em>, </em><em>Location'</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – A label or location, or start
index if <cite>end</cite> is specified.</p></li>
<li><p><strong>end</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – The exclusive end index of the location in text if it has
not been specified by a label.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A view of this label index.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.data.LabelIndex" title="mtap.data.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap</span> <span class="kn">import</span> <span class="n">label_index</span><span class="p">,</span> <span class="n">label</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">label_index</span><span class="p">([</span><span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">6</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">.</span><span class="n">inside</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="go">label_index([GenericLabel(5, 10, x=3), GenericLabel(7, 10, x=4)], distinct=False)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.data.LabelIndex.beginning_inside">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">beginning_inside</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_label_indices.html#LabelIndex.beginning_inside"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.LabelIndex.beginning_inside" title="Permalink to this definition">¶</a></dt>
<dd><p>A label index containing all labels whose begin index is inside the specified location
in text.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><em>Label'</em><em>, </em><em>Location'</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – A label or location, or start
index if <cite>end</cite> is specified.</p></li>
<li><p><strong>end</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – The exclusive end index of the location in text if it has
not been specified by a label.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A view of this label index.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.data.LabelIndex" title="mtap.data.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap</span> <span class="kn">import</span> <span class="n">label_index</span><span class="p">,</span> <span class="n">label</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">label_index</span><span class="p">([</span><span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">6</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">.</span><span class="n">beginning_inside</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
<span class="go">label_index([GenericLabel(7, 10, x=4), GenericLabel(10, 15, x=6)], distinct=False)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.data.LabelIndex.overlapping">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">overlapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_label_indices.html#LabelIndex.overlapping"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.LabelIndex.overlapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all labels that overlap the specified location in text.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><em>Label'</em><em>, </em><em>Location'</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – A label or location, or start
index if <cite>end</cite> is specified.</p></li>
<li><p><strong>end</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – The exclusive end index of the location in text if it has
not been specified by a label.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A view of this label index.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.data.LabelIndex" title="mtap.data.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap</span> <span class="kn">import</span> <span class="n">label_index</span><span class="p">,</span> <span class="n">label</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">label_index</span><span class="p">([</span><span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">6</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">.</span><span class="n">overlapping</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="go">label_index([GenericLabel(0, 10, x=2), GenericLabel(5, 10, x=3), GenericLabel(5, 15, x=5),</span>
<span class="go">             GenericLabel(7, 10, x=4)], distinct=False)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.data.LabelIndex.before">
<span class="sig-name descname"><span class="pre">before</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_label_indices.html#LabelIndex.before"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.LabelIndex.before" title="Permalink to this definition">¶</a></dt>
<dd><p>A label index containing all labels that are before a label’s location in text or
an index in text.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><em>Label'</em><em>, </em><em>Location'</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – A label or location whose
<cite>start_index</cite> will be used, or a float index in text.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A view of this label index.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.data.LabelIndex" title="mtap.data.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap</span> <span class="kn">import</span> <span class="n">label_index</span><span class="p">,</span> <span class="n">label</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">label_index</span><span class="p">([</span><span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">6</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">.</span><span class="n">before</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="go">label_index([GenericLabel(0, 5, x=1)], distinct=False)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.data.LabelIndex.after">
<span class="sig-name descname"><span class="pre">after</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_label_indices.html#LabelIndex.after"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.LabelIndex.after" title="Permalink to this definition">¶</a></dt>
<dd><p>A label index containing all labels that are after a label’s location in text
or an index in text.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference internal" href="#mtap.data.Label" title="mtap.data.Label"><em>Label</em></a><em>, </em><a class="reference internal" href="#mtap.data.Location" title="mtap.data.Location"><em>Location</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – A label or location whose <cite>end_index</cite> will
be used, or a float index in text.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A view of this label index.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.data.LabelIndex" title="mtap.data.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap</span> <span class="kn">import</span> <span class="n">label_index</span><span class="p">,</span> <span class="n">label</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">label_index</span><span class="p">([</span><span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">6</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="go">label_index([GenericLabel(7, 10, x=4), GenericLabel(10, 15, x=6)], distinct=False)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.data.LabelIndex.ascending">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ascending</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_label_indices.html#LabelIndex.ascending"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.LabelIndex.ascending" title="Permalink to this definition">¶</a></dt>
<dd><p>This label index sorted according to ascending start and end index.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A view of this label index.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#mtap.data.LabelIndex" title="mtap.data.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap</span> <span class="kn">import</span> <span class="n">label_index</span><span class="p">,</span> <span class="n">label</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">label_index</span><span class="p">([</span><span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">6</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">==</span> <span class="n">index</span><span class="o">.</span><span class="n">ascending</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.data.LabelIndex.descending">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">descending</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_label_indices.html#LabelIndex.descending"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.LabelIndex.descending" title="Permalink to this definition">¶</a></dt>
<dd><p>This label index sorted according to descending start index and ascending end index.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A view of this label index.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#mtap.data.LabelIndex" title="mtap.data.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap</span> <span class="kn">import</span> <span class="n">label_index</span><span class="p">,</span> <span class="n">label</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">label_index</span><span class="p">([</span><span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">6</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">.</span><span class="n">descending</span><span class="p">()</span>
<span class="go">label_index([GenericLabel(10, 15, x=6), GenericLabel(7, 10, x=4), GenericLabel(5, 15, x=5),</span>
<span class="go">             GenericLabel(5, 10, x=3), GenericLabel(0, 10, x=2), GenericLabel(0, 5, x=1)], distinct=False)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</section>
<section id="custom-label-types">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Custom Label Types</a><a class="headerlink" href="#custom-label-types" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="mtap.data.ProtoLabelAdapter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.data.</span></span><span class="sig-name descname"><span class="pre">ProtoLabelAdapter</span></span><a class="reference internal" href="_modules/mtap/data/_label_adapters.html#ProtoLabelAdapter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.ProtoLabelAdapter" title="Permalink to this definition">¶</a></dt>
<dd><p>Responsible for marshalling and unmarshalling of label objects to and from proto messages.</p>
<dl class="py method">
<dt class="sig sig-object py" id="mtap.data.ProtoLabelAdapter.create_label">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_label</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_label_adapters.html#ProtoLabelAdapter.create_label"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.ProtoLabelAdapter.create_label" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by labelers to create labels.</p>
<p>Should include the positional arguments <cite>start_index</cite> and <cite>end_index</cite>, because those are
required properties of labels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – Arbitrary args used to create the label.</p></li>
<li><p><strong>kwargs</strong> – Arbitrary keyword args used to create the label.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An object of the label type.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.data.Label" title="mtap.data.Label">Label</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.data.ProtoLabelAdapter.create_index_from_response">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_index_from_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">response</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_label_adapters.html#ProtoLabelAdapter.create_index_from_response"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.ProtoLabelAdapter.create_index_from_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a LabelIndex from the response from an events service.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>response</strong> (<em>mtap.api.v1.events_pb2.GetLabelsResponse</em>) – The response protobuf message from
the events service.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A label index containing all the labels from the events service.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.data.LabelIndex" title="mtap.data.LabelIndex">LabelIndex</a>[L]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.data.ProtoLabelAdapter.create_index">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">labels</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_label_adapters.html#ProtoLabelAdapter.create_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.ProtoLabelAdapter.create_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a LabelIndex from an iterable of label objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>labels</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.11)"><em>Iterable</em></a><em>[</em><em>L</em><em>]</em>) – Labels to put in index.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A label index containing all of the labels in the list.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.data.LabelIndex" title="mtap.data.LabelIndex">LabelIndex</a>[L]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.data.ProtoLabelAdapter.add_to_message">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_to_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">labels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_label_adapters.html#ProtoLabelAdapter.add_to_message"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.ProtoLabelAdapter.add_to_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a list of labels to a request to the event service to add labels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>labels</strong> (<em>Iterable</em><em>[</em><em>L</em><em>]</em>) – The list of labels that need to be sent to the server.</p></li>
<li><p><strong>request</strong> (<em>mtap.api.v1.events_pb2.AddLabelsRequest</em>) – The request proto message to add the
labels to.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.data.ProtoLabelAdapter.pack">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">pack</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_label_text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_label_adapters.html#ProtoLabelAdapter.pack"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.ProtoLabelAdapter.pack" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares to serialize a label index by transforming the label index into a representation
that can be dumped to json, yml, pickle, etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index</strong> – The index itself.</p></li>
<li><p><strong>include_label_text</strong> – Whether to include the label’s text in the serialized representation
(for informative reasons).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary representation of the label index.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.data.ProtoLabelAdapter.unpack">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">unpack</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">packed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_index_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">document</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_label_adapters.html#ProtoLabelAdapter.unpack"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.ProtoLabelAdapter.unpack" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a packed, serializable object and turns it into a full label index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>packed</strong> (<em>Any</em>) – The packed representation.</p></li>
<li><p><strong>label_index_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The index name of the label index.</p></li>
<li><p><strong>document</strong> (<a class="reference internal" href="#mtap.Document" title="mtap.Document"><em>Document</em></a>) – The document this label index occurs on.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The label index.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.data.LabelIndex" title="mtap.data.LabelIndex">LabelIndex</a>[L]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.data.ProtoLabelAdapter.store_references">
<span class="sig-name descname"><span class="pre">store_references</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">labels</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/data/_label_adapters.html#ProtoLabelAdapter.store_references"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.data.ProtoLabelAdapter.store_references" title="Permalink to this definition">¶</a></dt>
<dd><p>Take all the references for the labels and turn them into static references.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>labels</strong> (<em>Sequence</em><em>[</em><em>L</em><em>]</em>) – The labels to store the references on.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="creating-processors">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Creating Processors</a><a class="headerlink" href="#creating-processors" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="mtap.processing.Processor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.processing.</span></span><span class="sig-name descname"><span class="pre">Processor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_base.html#Processor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processing.Processor" title="Permalink to this definition">¶</a></dt>
<dd><p>Mixin used by all processor abstract base classes that provides the ability to update
serving status and use timers.</p>
<dl class="py method">
<dt class="sig sig-object py" id="mtap.processing.Processor.update_serving_status">
<span class="sig-name descname"><span class="pre">update_serving_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">status</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_base.html#Processor.update_serving_status"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processing.Processor.update_serving_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the serving status of the processor for health checking.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>status</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – One of “SERVING”, “NOT_SERVING”, “UNKNOWN”.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mtap.processing.Processor.custom_label_adapters">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">custom_label_adapters</span></span><a class="headerlink" href="#mtap.processing.Processor.custom_label_adapters" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to provide non-standard proto label adapters for specific index names.</p>
<p>Returns:</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.processing.Processor.started_stopwatch">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">started_stopwatch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_base.html#Processor.started_stopwatch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processing.Processor.started_stopwatch" title="Permalink to this definition">¶</a></dt>
<dd><p>An object that can be used to time aspects of processing. The stopwatch will be started
at creation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The key to store the time under.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An object that is used to do the timing.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.processing.Stopwatch" title="mtap.processing.Stopwatch">Stopwatch</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># In a process method</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">started_stopwatch</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="c1"># do work</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.processing.Processor.unstarted_stopwatch">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">unstarted_stopwatch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_base.html#Processor.unstarted_stopwatch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processing.Processor.unstarted_stopwatch" title="Permalink to this definition">¶</a></dt>
<dd><p>An object that can be used to time aspects of processing. The stopwatch will be stopped
at creation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The key to store the time under.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An object that is used to do the timing.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.processing.Stopwatch" title="mtap.processing.Stopwatch">Stopwatch</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># In a process method</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">unstarted_stopwatch</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">stopwatch</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="c1"># work you don&#39;t want timed</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">stopwatch</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="c1"># work you do want timed</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">stopwatch</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mtap.EventProcessor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.</span></span><span class="sig-name descname"><span class="pre">EventProcessor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_base.html#EventProcessor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.EventProcessor" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract base class for an event processor.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">ExampleProcessor</span><span class="p">(</span><span class="n">EventProcessor</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
<span class="gp">... </span>         <span class="c1"># do work on the event</span>
<span class="gp">... </span>         <span class="o">...</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="mtap.EventProcessor.process">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_base.html#EventProcessor.process"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.EventProcessor.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs processing on an event, implemented by the subclass.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event</strong> (<a class="reference internal" href="#mtap.Event" title="mtap.Event"><em>Event</em></a>) – The event object to be processed.</p></li>
<li><p><strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><em>Dict</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><em>Any</em></a><em>]</em>) – Processing parameters. A dictionary of strings mapped to json-serializable values.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An arbitrary dictionary of strings mapped to json-serializable values which will be
returned to the caller, even remotely.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><em>Dict</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>, Any]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.EventProcessor.default_adapters">
<span class="sig-name descname"><span class="pre">default_adapters</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_base.html#EventProcessor.default_adapters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.EventProcessor.default_adapters" title="Permalink to this definition">¶</a></dt>
<dd><p>Can be overridden to return a mapping from label index names to adapters that will then
be used in any documents or events provided to this processor’s process methods.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The mapping (dict-like) of label index names to
ProtoLabelAdapters to be used for those indices.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Mapping[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>, <a class="reference internal" href="#mtap.data.ProtoLabelAdapter" title="mtap.data.ProtoLabelAdapter">ProtoLabelAdapter</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.EventProcessor.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_base.html#EventProcessor.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.EventProcessor.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Can be overridden for cleaning up anything that needs to be cleaned up. Will be called
by the framework after it’s done with the processor.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mtap.DocumentProcessor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.</span></span><span class="sig-name descname"><span class="pre">DocumentProcessor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_base.html#DocumentProcessor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.DocumentProcessor" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract base class for a document processor.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">ExampleProcessor</span><span class="p">(</span><span class="n">mtap</span><span class="o">.</span><span class="n">DocumentProcessor</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">document</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
<span class="gp">... </span>        <span class="c1"># do processing on document</span>
<span class="gp">... </span>        <span class="o">...</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">ExampleProcessor</span><span class="p">(</span><span class="n">mtap</span><span class="o">.</span><span class="n">DocumentProcessor</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">document</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
<span class="gp">... </span>         <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">started_stopwatch</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">):</span>
<span class="gp">... </span>              <span class="c1"># use stopwatch on something</span>
<span class="gp">... </span>              <span class="o">...</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="mtap.DocumentProcessor.process_document">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">process_document</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">document</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_base.html#DocumentProcessor.process_document"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.DocumentProcessor.process_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs processing of a document on an event, implemented by the subclass.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>document</strong> (<a class="reference internal" href="#mtap.Document" title="mtap.Document"><em>Document</em></a>) – The document object to be processed.</p></li>
<li><p><strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><em>Dict</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><em>Any</em></a><em>]</em>) – Processing parameters. A dictionary of strings mapped to json-serializable values.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An arbitrary dictionary of strings mapped to json-serializable values that will be
returned to the caller of the processor.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><em>Dict</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><em>Any</em></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.DocumentProcessor.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_base.html#DocumentProcessor.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.DocumentProcessor.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Can be overridden for cleaning up anything that needs to be cleaned up. Will be called
by the framework after it’s done with the processor.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mtap.processing.Stopwatch">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.processing.</span></span><span class="sig-name descname"><span class="pre">Stopwatch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_base.html#Stopwatch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processing.Stopwatch" title="Permalink to this definition">¶</a></dt>
<dd><p>A class for timing runtime of components and returning the total runtime with the
processor’s results.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.processing.Stopwatch.duration">
<span class="sig-name descname"><span class="pre">duration</span></span><a class="headerlink" href="#mtap.processing.Stopwatch.duration" title="Permalink to this definition">¶</a></dt>
<dd><p>The amount of time elapsed for this timer.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.11)"><em>timedelta</em></a></p>
</dd>
</dl>
</dd></dl>

<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># in an EventProcessor or DocumentProcessor process method call</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">started_stopwatch</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">timed_routine</span><span class="p">()</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># in an EventProcessor or DocumentProcessor process method call</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">unstarted_stopwatch</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">stopwatch</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="c1"># work you don&#39;t want timed</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">stopwatch</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="c1"># work you want timed</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">stopwatch</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="mtap.processing.Stopwatch.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_base.html#Stopwatch.start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processing.Stopwatch.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts the timer.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.processing.Stopwatch.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_base.html#Stopwatch.stop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processing.Stopwatch.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops / pauses the timer</p>
</dd></dl>

</dd></dl>

</section>
<section id="processor-description-decorators">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Processor Description Decorators</a><a class="headerlink" href="#processor-description-decorators" title="Permalink to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="mtap.processor">
<span class="sig-prename descclassname"><span class="pre">mtap.</span></span><span class="sig-name descname"><span class="pre">processor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">human_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">additional_metadata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/descriptions.html#processor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processor" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator which attaches a service name and metadata to a processor. Which then can be used
for runtime reflection of how the processor works.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – <p>Identifying service name both for launching via command line and for service
registration.</p>
<p>Should be a mix of alphanumeric characters and dashes so that it plays nice with the
DNS name requirements of service discovery tools like Consul. Can be overridden at
runtime via the <cite>identifier</cite> option on <a class="reference internal" href="#mtap.processor_parser" title="mtap.processor_parser"><code class="xref py py-func docutils literal notranslate"><span class="pre">processor_parser()</span></code></a>.</p>
</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>human_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em>) – An option human name for the processor.</p></li>
<li><p><strong>description</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em>) – A short description of the processor and what it does.</p></li>
<li><p><strong>parameters</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.11)"><em>List</em></a><em>[</em><em>ParameterDescription</em><em>]</em><em>]</em>) – The processor’s parameters.</p></li>
<li><p><strong>inputs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.11)"><em>List</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em><em>]</em>) – <p>String identifiers for the output from a processor that this processor uses as an input.</p>
<p>Takes the format “[processor-name]/[output]”. Examples would be “tagger:pos_tags” or
“sentence-detector:sentences”.</p>
</p></li>
<li><p><strong>outputs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.11)"><em>List</em></a><em>[</em><em>LabelDescription</em><em>]</em><em>]</em>) – The label indices this processor outputs.</p></li>
<li><p><strong>**additional_metadata</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><em>Any</em></a>) – Any other data that should be added to the processor’s metadata, should be serializable
to yaml and json.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A decorator to be applied to instances of EventProcessor or DocumentProcessor. This
decorator attaches the metadata so it can be reflected at runtime.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap.processing</span> <span class="kn">import</span> <span class="n">EventProcessor</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@processor</span><span class="p">(</span><span class="s1">&#39;example-text-converter&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">TextConverter</span><span class="p">(</span><span class="n">EventProcessor</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="o">...</span>
</pre></div>
</div>
<p>or</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap.processing</span> <span class="kn">import</span> <span class="n">DocumentProcessor</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@processor</span><span class="p">(</span><span class="s1">&#39;example-sentence-detector&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">SentenceDetector</span><span class="p">(</span><span class="n">DocumentProcessor</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="o">...</span>
</pre></div>
</div>
<p>From our own example processor:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap.processing</span> <span class="kn">import</span> <span class="n">DocumentProcessor</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@processor</span><span class="p">(</span><span class="s1">&#39;mtap-example-processor-python&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>           <span class="n">human_name</span><span class="o">=</span><span class="s2">&quot;Python Example Processor&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>           <span class="n">description</span><span class="o">=</span><span class="s2">&quot;counts the number of times the letters a and b occur in a document&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>           <span class="n">parameters</span><span class="o">=</span><span class="p">[</span>
<span class="gp">&gt;&gt;&gt; </span>               <span class="n">parameter</span><span class="p">(</span><span class="s1">&#39;do_work&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">data_type</span><span class="o">=</span><span class="s1">&#39;bool&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                         <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether the processor should do anything.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>           <span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>           <span class="n">outputs</span><span class="o">=</span><span class="p">[</span>
<span class="gp">&gt;&gt;&gt; </span>               <span class="n">labels</span><span class="p">(</span><span class="s1">&#39;mtap.examples.letter_counts&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                           <span class="n">properties</span><span class="o">=</span><span class="p">[</span><span class="n">label_property</span><span class="p">(</span><span class="s1">&#39;letter&#39;</span><span class="p">,</span> <span class="n">data_type</span><span class="o">=</span><span class="s1">&#39;str&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>                                       <span class="n">label_property</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="n">data_type</span><span class="o">=</span><span class="s1">&#39;int&#39;</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span>           <span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">ExampleProcessor</span><span class="p">(</span><span class="n">DocumentProcessor</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mtap.processing.descriptions.parameter">
<span class="sig-prename descclassname"><span class="pre">mtap.processing.descriptions.</span></span><span class="sig-name descname"><span class="pre">parameter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/descriptions.html#parameter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processing.descriptions.parameter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mtap.processing.descriptions.labels">
<span class="sig-prename descclassname"><span class="pre">mtap.processing.descriptions.</span></span><span class="sig-name descname"><span class="pre">labels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optional</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_from_parameter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/descriptions.html#labels"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processing.descriptions.labels" title="Permalink to this definition">¶</a></dt>
<dd><p>A description for a label type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The label index name.</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>reference</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em>) – If this is an output of another processor, that processor’s name followed by a slash
and the default output name of the index go here.
Example: “sentence-detector/sentences”.</p></li>
<li><p><strong>optional</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether this label index is an optional input or output.</p></li>
<li><p><strong>name_from_parameter</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em>) – If the label index gets its name from a processor parameter, the name of the parameter.</p></li>
<li><p><strong>description</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em>) – A short description of the label index.</p></li>
<li><p><strong>properties</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.11)"><em>List</em></a><em>[</em><a class="reference internal" href="#mtap.processing.descriptions.label_property" title="mtap.processing.descriptions.label_property"><em>label_property</em></a><em>]</em><em>]</em>) – The properties of the labels in the label index.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.processing.descriptions.name">
<span class="sig-prename descclassname"><span class="pre">mtap.processing.descriptions.</span></span><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#mtap.processing.descriptions.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The label index name.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.processing.descriptions.reference">
<span class="sig-prename descclassname"><span class="pre">mtap.processing.descriptions.</span></span><span class="sig-name descname"><span class="pre">reference</span></span><a class="headerlink" href="#mtap.processing.descriptions.reference" title="Permalink to this definition">¶</a></dt>
<dd><p>If this is an output of another processor, that processor’s name followed by a slash
and the default output name of the index go here.
Example: “sentence-detector/sentences”.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.processing.descriptions.optional">
<span class="sig-prename descclassname"><span class="pre">mtap.processing.descriptions.</span></span><span class="sig-name descname"><span class="pre">optional</span></span><a class="headerlink" href="#mtap.processing.descriptions.optional" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether this label index is an optional input or output.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.processing.descriptions.name_from_parameter">
<span class="sig-prename descclassname"><span class="pre">mtap.processing.descriptions.</span></span><span class="sig-name descname"><span class="pre">name_from_parameter</span></span><a class="headerlink" href="#mtap.processing.descriptions.name_from_parameter" title="Permalink to this definition">¶</a></dt>
<dd><p>If the label index gets its name from a processor parameter, the name of the parameter.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.processing.descriptions.description">
<span class="sig-prename descclassname"><span class="pre">mtap.processing.descriptions.</span></span><span class="sig-name descname"><span class="pre">description</span></span><a class="headerlink" href="#mtap.processing.descriptions.description" title="Permalink to this definition">¶</a></dt>
<dd><p>A short description of the label index.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.processing.descriptions.properties">
<span class="sig-prename descclassname"><span class="pre">mtap.processing.descriptions.</span></span><span class="sig-name descname"><span class="pre">properties</span></span><a class="headerlink" href="#mtap.processing.descriptions.properties" title="Permalink to this definition">¶</a></dt>
<dd><p>The properties of the labels in the label index.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.11)"><em>List</em></a>[label_property]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mtap.processing.descriptions.label_property">
<span class="sig-prename descclassname"><span class="pre">mtap.processing.descriptions.</span></span><span class="sig-name descname"><span class="pre">label_property</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nullable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/descriptions.html#label_property"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processing.descriptions.label_property" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a description for a property on a label.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The property’s name.</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>description</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em>) – A short description of the property.</p></li>
<li><p><strong>data_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em>) – The data type of the property: str, float, or bool; List[T] or Mapping[T1, T2] of those.</p></li>
<li><p><strong>nullable</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether the property can have a valid value of null.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="running-services">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Running Services</a><a class="headerlink" href="#running-services" title="Permalink to this heading">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="mtap.processor_parser">
<span class="sig-prename descclassname"><span class="pre">mtap.</span></span><span class="sig-name descname"><span class="pre">processor_parser</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_service.html#processor_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processor_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>An <a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArgumentParser</span></code></a> that can be used to parse the settings for
<a class="reference internal" href="#mtap.run_processor" title="mtap.run_processor"><code class="xref py py-func docutils literal notranslate"><span class="pre">run_processor()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A parser containing server settings.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser" title="(in Python v3.11)"><em>ArgumentParser</em></a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Using this as a parent parser:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span> <span class="o">=</span> <span class="n">ArgumentParser</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="n">processor_parser</span><span class="p">()])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--my-arg-1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--my-arg-2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span> <span class="o">=</span> <span class="n">MyProcessor</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">my_arg_1</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">my_arg_2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">run_processor</span><span class="p">(</span><span class="n">processor</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mtap.run_processor">
<span class="sig-prename descclassname"><span class="pre">mtap.</span></span><span class="sig-name descname"><span class="pre">run_processor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">proc</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mp_context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_service.html#run_processor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.run_processor" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the processor as a GRPC service, blocking until an interrupt signal is received.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>proc</strong> (<a class="reference internal" href="#mtap.EventProcessor" title="mtap.EventProcessor"><em>EventProcessor</em></a>) – The processor to host.</p></li>
<li><p><strong>mp</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – If true, will create instances of <code class="docutils literal notranslate"><span class="pre">proc</span></code> on multiple forked processes to
process events. This is useful if the processor is computationally intensive and would
run into Python GIL issues on a single process.</p></li>
<li><p><strong>options</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.Namespace" title="(in Python v3.11)"><em>Namespace</em></a><em>]</em>) – The parsed arguments from the parser
returned by <a class="reference internal" href="#mtap.processor_parser" title="mtap.processor_parser"><code class="xref py py-func docutils literal notranslate"><span class="pre">processor_parser()</span></code></a>.</p></li>
<li><p><strong>args</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em><em>]</em>) – Arguments to parse server settings from if
<code class="docutils literal notranslate"><span class="pre">namespace</span></code> was not supplied.</p></li>
<li><p><strong>mp_context</strong> – A multiprocessing context that gets passed to the process pool executor in the
case of mp = True.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Will automatically parse arguments:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">run_processor</span><span class="p">(</span><span class="n">MyProcessor</span><span class="p">())</span>
</pre></div>
</div>
<p>Manual arguments:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">run_processor</span><span class="p">(</span><span class="n">MyProcessor</span><span class="p">(),</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;-p&#39;</span><span class="p">,</span> <span class="s1">&#39;8080&#39;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mtap.EventsServer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.</span></span><span class="sig-name descname"><span class="pre">EventsServer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">register</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_address</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/_events_service.html#EventsServer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.EventsServer" title="Permalink to this definition">¶</a></dt>
<dd><p>Server which hosts events.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The address / hostname / IP to host the server on.</p></li>
<li><p><strong>port</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The port to host the server on.</p></li>
<li><p><strong>register</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether to register the service with service discovery.</p></li>
<li><p><strong>workers</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The number of workers that should handle requests.</p></li>
<li><p><strong>write_address</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether to write the events service address to a file.</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="#mtap.Config" title="mtap.Config"><em>mtap.Config</em></a>) – An optional mtap config.</p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="mtap.EventsServer.port">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">port</span></span><a class="headerlink" href="#mtap.EventsServer.port" title="Permalink to this definition">¶</a></dt>
<dd><p>The port the processor service is bound to.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.EventsServer.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/_events_service.html#EventsServer.start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.EventsServer.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts the service.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.EventsServer.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/_events_service.html#EventsServer.stop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.EventsServer.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>De-registers (if registered with service discovery) the service and immediately stops
accepting requests, completely stopping the service after a specified <cite>grace</cite> time.</p>
<p>During the grace period the server will continue to process existing requests, but it will
not accept any new requests. This function is idempotent, multiple calls will shutdown
the server after the soonest grace to expire, calling the shutdown event for all calls to
this function.</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>grace</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – The grace period in seconds that the server should continue processing requests
before shutdown.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A shutdown event for the server.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/threading.html#threading.Event" title="(in Python v3.11)">threading.Event</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mtap.ProcessorServer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.</span></span><span class="sig-name descname"><span class="pre">ProcessorServer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">runner</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">register</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_address</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_service.html#ProcessorServer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.ProcessorServer" title="Permalink to this definition">¶</a></dt>
<dd><p>Host a MTAP processor as a service.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>proc</strong> (<a class="reference internal" href="#mtap.EventProcessor" title="mtap.EventProcessor"><em>EventProcessor</em></a>) – The event processor to host.</p></li>
<li><p><strong>host</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The address / hostname / IP to host the server on.</p></li>
<li><p><strong>port</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The port to host the server on, or 0 to use a random port.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>register</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em>) – Whether to register the processor with service discovery.</p></li>
<li><p><strong>events_address</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em>) – The address of the events server, or omitted / None if the events service should be
discovered.</p></li>
<li><p><strong>processor_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em>) – The identifier to register the processor under, if omitted the processor name will be
used.</p></li>
<li><p><strong>workers</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em>) – The number of workers that should handle requests. Defaults to 10.</p></li>
<li><p><strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.11)"><em>Mapping</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><em>Any</em></a><em>]</em>) – A set of default parameters that will be passed to the processor every time it runs.</p></li>
<li><p><strong>grpc_enable_http_proxy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Enables or disables the grpc channel to the event service using http_proxy or
https_proxy environment variables.</p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="mtap.ProcessorServer.port">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">port</span></span><a class="headerlink" href="#mtap.ProcessorServer.port" title="Permalink to this definition">¶</a></dt>
<dd><p>Port the hosted server is bound to.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.ProcessorServer.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_service.html#ProcessorServer.start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.ProcessorServer.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts the service.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.ProcessorServer.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_service.html#ProcessorServer.stop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.ProcessorServer.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>De-registers (if registered with service discovery) the service and immediately stops
accepting requests, completely stopping the service after a specified <cite>grace</cite> time.</p>
<p>During the grace period the server will continue to process existing requests, but it will
not accept any new requests. This function is idempotent, multiple calls will shutdown
the server after the soonest grace to expire, calling the shutdown event for all calls to
this function.</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>grace</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) – The grace period that the server should continue processing requests for shutdown.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A shutdown event for the server.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/threading.html#threading.Event" title="(in Python v3.11)">threading.Event</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="running-a-pipeline">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">Running a pipeline</a><a class="headerlink" href="#running-a-pipeline" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="mtap.Pipeline">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.</span></span><span class="sig-name descname"><span class="pre">Pipeline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">components</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">events_address</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">events_client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mp_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_pipeline.html#Pipeline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.Pipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>An object which can be used to build and run a pipeline of remote and local processors.</p>
<p>Pipelines are a <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.MutableSequence" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MutableSequence</span></code></a> containing
one or more <code class="xref py py-obj docutils literal notranslate"><span class="pre">ComponentDescriptor</span></code>,
a pipeline can be modified after creation using this functionality.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>*components</strong> (<a class="reference internal" href="#mtap.processing.ComponentDescriptor" title="mtap.processing.ComponentDescriptor"><em>ComponentDescriptor</em></a>) – A list of component descriptors created using <a class="reference internal" href="#mtap.RemoteProcessor" title="mtap.RemoteProcessor"><code class="xref py py-class docutils literal notranslate"><span class="pre">RemoteProcessor</span></code></a> or
<a class="reference internal" href="#mtap.LocalProcessor" title="mtap.LocalProcessor"><code class="xref py py-class docutils literal notranslate"><span class="pre">LocalProcessor</span></code></a>.</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em>) – An optional name for the pipeline, defaults to ‘pipeline’.</p></li>
<li><p><strong>config</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference internal" href="#mtap.Config" title="mtap.Config"><em>Config</em></a><em>]</em>) – An optional config override.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.Pipeline.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#mtap.Pipeline.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The pipeline’s name.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<p class="rubric">Examples</p>
<p>Remote pipeline with name discovery:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">mtap</span><span class="o">.</span><span class="n">Pipeline</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">RemoteProcessor</span><span class="p">(</span><span class="s1">&#39;processor-1-id&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">RemoteProcessor</span><span class="p">(</span><span class="s1">&#39;processor-2-id&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">RemoteProcessor</span><span class="p">(</span><span class="s1">&#39;processor-3-id&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">)</span> <span class="k">as</span> <span class="n">pipeline</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">client</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">events_client</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">for</span> <span class="n">txt</span> <span class="ow">in</span> <span class="n">txts</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">with</span> <span class="n">Event</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span> <span class="k">as</span> <span class="n">event</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="n">document</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">add_document</span><span class="p">(</span><span class="s1">&#39;plaintext&#39;</span><span class="p">,</span> <span class="n">txt</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="n">results</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
</pre></div>
</div>
<p>Remote pipeline using addresses:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">mtap</span><span class="o">.</span><span class="n">Pipeline</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">RemoteProcessor</span><span class="p">(</span><span class="s1">&#39;processor-1-name&#39;</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s1">&#39;localhost:50052&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">RemoteProcessor</span><span class="p">(</span><span class="s1">&#39;processor-2-id&#39;</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s1">&#39;localhost:50053&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">RemoteProcessor</span><span class="p">(</span><span class="s1">&#39;processor-3-id&#39;</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s1">&#39;localhost:50054&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">events_address</span><span class="o">=</span><span class="s1">&#39;localhost:50051&#39;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">)</span> <span class="k">as</span> <span class="n">pipeline</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">client</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">events_client</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">for</span> <span class="n">txt</span> <span class="ow">in</span> <span class="n">txts</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">with</span> <span class="n">Event</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span> <span class="k">as</span> <span class="n">event</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="n">document</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">add_document</span><span class="p">(</span><span class="s1">&#39;plaintext&#39;</span><span class="p">,</span> <span class="n">txt</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="n">results</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
</pre></div>
</div>
<p>Modifying pipeline</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">RemoteProcessor</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s1">&#39;localhost:50000&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>                    <span class="n">RemoteProcessor</span><span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s1">&#39;localhost:50000&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span>
<span class="go">Pipeline(RemoteProcessor(processor_name=&#39;foo&#39;, address=&#39;localhost:50000&#39;, component_id=None, params=None),</span>
<span class="go">         RemoteProcessor(processor_name=&#39;bar&#39;, address=&#39;localhost:50000&#39;, component_id=None, params=None))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">RemoteProcessor</span><span class="p">(</span><span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s1">&#39;localhost:50001&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span>
<span class="go">Pipeline(RemoteProcessor(processor_name=&#39;foo&#39;, address=&#39;localhost:50000&#39;, component_id=None, params=None),</span>
<span class="go">         RemoteProcessor(processor_name=&#39;bar&#39;, address=&#39;localhost:50000&#39;, component_id=None, params=None),</span>
<span class="go">         RemoteProcessor(processor_name=&#39;baz&#39;, address=&#39;localhost:50001&#39;, component_id=None, params=None))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">pipeline</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span>
<span class="go">Pipeline(RemoteProcessor(processor_name=&#39;foo&#39;, address=&#39;localhost:50000&#39;, component_id=None, params=None),</span>
<span class="go">         RemoteProcessor(processor_name=&#39;baz&#39;, address=&#39;localhost:50001&#39;, component_id=None, params=None))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">RemoteProcessor</span><span class="p">(</span><span class="n">processor_name</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s1">&#39;localhost:50003&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span>
<span class="go">Pipeline(RemoteProcessor(processor_name=&#39;foo&#39;, address=&#39;localhost:50000&#39;, component_id=None, params=None),</span>
<span class="go">         RemoteProcessor(processor_name=&#39;bar&#39;, address=&#39;localhost:50003&#39;, component_id=None, params=None))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span> <span class="o">+=</span> <span class="nb">list</span><span class="p">(</span><span class="n">pipeline</span><span class="p">)</span>  <span class="c1"># Putting in a new list to prevent an infinite recursion</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span>
<span class="go">Pipeline(RemoteProcessor(processor_name=&#39;foo&#39;, address=&#39;localhost:50000&#39;, component_id=None, params=None),</span>
<span class="go">         RemoteProcessor(processor_name=&#39;bar&#39;, address=&#39;localhost:50003&#39;, component_id=None, params=None),</span>
<span class="go">         RemoteProcessor(processor_name=&#39;foo&#39;, address=&#39;localhost:50000&#39;, component_id=None, params=None),</span>
<span class="go">         RemoteProcessor(processor_name=&#39;bar&#39;, address=&#39;localhost:50003&#39;, component_id=None, params=None))</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="mtap.Pipeline.from_yaml_file">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_yaml_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_pipeline.html#Pipeline.from_yaml_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.Pipeline.from_yaml_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a pipeline from a yaml pipeline configuration file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>conf_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.11)"><em>pathlib.Path</em></a>) – The path to the configuration file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Pipeline object from the configuration.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.Pipeline.load_configuration">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load_configuration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_pipeline.html#Pipeline.load_configuration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.Pipeline.load_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a pipeline from a pipeline configuration dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>conf</strong> (<em>Dict</em>) – The pipeline configuration dictionary.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Pipeline created from the configuration.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.Pipeline.run_multithread">
<span class="sig-name descname"><span class="pre">run_multithread</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_progress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">close_events</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_failures</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_ahead</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mp_context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_pipeline.html#Pipeline.run_multithread"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.Pipeline.run_multithread" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs this pipeline on a source which provides multiple documents / events.</p>
<p>Concurrency is per-event, with each event being provided a thread which runs it through the
pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.11)"><em>Iterable</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference internal" href="#mtap.Event" title="mtap.Event"><em>Event</em></a><em>, </em><a class="reference internal" href="#mtap.Document" title="mtap.Document"><em>Document</em></a><em>]</em><em>]</em><em>, </em><a class="reference internal" href="#mtap.processing.ProcessingSource" title="mtap.processing.ProcessingSource"><em>ProcessingSource</em></a><em>]</em>) – A generator of events or documents to process. This should be an
<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Iterable</span></code></a> of either <a class="reference internal" href="#mtap.Event" title="mtap.Event"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Event</span></code></a> or <a class="reference internal" href="#mtap.Document" title="mtap.Document"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Document</span></code></a> objects or a
<a class="reference internal" href="#mtap.processing.ProcessingSource" title="mtap.processing.ProcessingSource"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ProcessingSource</span></code></a>.</p></li>
<li><p><strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><em>Any</em></a><em>]</em><em>]</em>) – Json object containing params specific to processing this event, the existing params
dictionary defined in <code class="xref py py-func docutils literal notranslate"><span class="pre">add_processor()</span></code> will be updated with
the contents of this dict.</p></li>
<li><p><strong>show_progress</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em>) – Whether to print a progress bar using tqdm.</p></li>
<li><p><strong>total</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em>) – An optional argument indicating the total number of events / documents that will be
provided by the iterable, for the progress bar.</p></li>
<li><p><strong>close_events</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>]</em>) – Whether the pipeline should close events after they have been fully processed
through all components.</p></li>
<li><p><strong>max_failures</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em>) – The number of acceptable failures. Once this amount is exceeded processing will
halt. Note that because of the nature of conccurrency processing may continue for a
short amount of time before termination.</p></li>
<li><p><strong>workers</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em>) – The number of threads to process documents on.</p></li>
<li><p><strong>read_ahead</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em>]</em>) – The number of source documents to read ahead into memory before processing.</p></li>
<li><p><strong>mp_context</strong> (<em>multiprocessing context</em><em>, </em><em>optional</em>) – An optional override for the multiprocessing context.</p></li>
<li><p><strong>(</strong><strong>~typing.Optional</strong><strong>[</strong><strong>~typing.Union</strong><strong>[</strong><strong>str</strong> (<em>log_level</em>) – The log_level for running the pipeline.</p></li>
<li><p><strong>int</strong><strong>]</strong><strong>]</strong> – The log_level for running the pipeline.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">docs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;abc/&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*.txt&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">document_source</span><span class="p">():</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">docs</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">with</span> <span class="n">path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="n">txt</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">with</span> <span class="n">Event</span><span class="p">(</span><span class="n">event_id</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">pipeline</span><span class="o">.</span><span class="n">events_client</span><span class="p">)</span> <span class="k">as</span> <span class="n">event</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="n">doc</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">create_document</span><span class="p">(</span><span class="s1">&#39;plaintext&#39;</span><span class="p">,</span> <span class="n">txt</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="k">yield</span> <span class="n">doc</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span><span class="o">.</span><span class="n">run_multithread</span><span class="p">(</span><span class="n">document_source</span><span class="p">(),</span> <span class="n">total</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">docs</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.Pipeline.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_pipeline.html#Pipeline.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.Pipeline.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Processes the event/document using all the processors in the pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference internal" href="#mtap.Event" title="mtap.Event"><em>Event</em></a><em>, </em><a class="reference internal" href="#mtap.Document" title="mtap.Document"><em>Document</em></a><em>]</em>) – Either an event or a document to process.</p></li>
<li><p><strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><em>Any</em></a><em>]</em>) – Json object containing params specific to processing this event, the existing params
dictionary defined in <code class="xref py py-func docutils literal notranslate"><span class="pre">add_processor()</span></code> will be updated with
the contents of this dict.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The results of all the processors in the pipeline.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.11)">list</a>[<a class="reference internal" href="#mtap.processing.ProcessingResult" title="mtap.processing.ProcessingResult">ProcessingResult</a>]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="n">mtap</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="n">mtap</span><span class="o">.</span><span class="n">Document</span><span class="p">(</span><span class="s1">&#39;plaintext&#39;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="n">e</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">Pipeline</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="k">as</span> <span class="n">pipeline</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">pipeline</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="c1"># is equivalent to pipeline.run(document.event, params={&#39;document_name&#39;: document.document_name})</span>
</pre></div>
</div>
<p>The ‘document_name’ param is used to indicate to <a class="reference internal" href="#mtap.DocumentProcessor" title="mtap.DocumentProcessor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DocumentProcessor</span></code></a>
which document on the event to process.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.Pipeline.pipeline_timer_stats">
<span class="sig-name descname"><span class="pre">pipeline_timer_stats</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_pipeline.html#Pipeline.pipeline_timer_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.Pipeline.pipeline_timer_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>The aggregated statistics for the global runtime of the pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The timing stats for the global runtime of the pipeline.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#mtap.processing.AggregateTimingInfo" title="mtap.processing.AggregateTimingInfo">AggregateTimingInfo</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.Pipeline.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_pipeline.html#Pipeline.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.Pipeline.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes any open connections to remote processors.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.Pipeline.as_processor">
<span class="sig-name descname"><span class="pre">as_processor</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_pipeline.html#Pipeline.as_processor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.Pipeline.as_processor" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the pipeline as a processor.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>An event processor that can be added to other pipelines or hosted.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#mtap.EventProcessor" title="mtap.EventProcessor">EventProcessor</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.Pipeline.print_times">
<span class="sig-name descname"><span class="pre">print_times</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_pipeline.html#Pipeline.print_times"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.Pipeline.print_times" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints all of the times collected during this pipeline using <a class="reference external" href="https://docs.python.org/3/library/functions.html#print" title="(in Python v3.11)"><code class="xref py py-func docutils literal notranslate"><span class="pre">print()</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mtap.processing.ComponentDescriptor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.processing.</span></span><span class="sig-name descname"><span class="pre">ComponentDescriptor</span></span><a class="reference internal" href="_modules/mtap/processing/_base.html#ComponentDescriptor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processing.ComponentDescriptor" title="Permalink to this definition">¶</a></dt>
<dd><p>A configuration which describes either a local or remote pipeline component and what the
pipeline needs to do to call the component.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mtap.RemoteProcessor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.</span></span><span class="sig-name descname"><span class="pre">RemoteProcessor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">processor_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">address</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_proxy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_pipeline.html#RemoteProcessor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.RemoteProcessor" title="Permalink to this definition">¶</a></dt>
<dd><p>A configuration for a remote processor that the pipeline will connect to in order
to perform processing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>processor_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The identifier used for health checking and discovery.</p></li>
<li><p><strong>address</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em>) – Optionally an address to use, will use service discovery configuration to locate
processors if this is None / omitted.</p></li>
<li><p><strong>component_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em>) – How the processor’s results will be identified locally. Will be modified to be unique
if it is not unique relative to other component in a pipeline.</p></li>
<li><p><strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a><em>, </em><em>Any</em><em>]</em>) – An optional parameter dictionary that will be passed to the processor as parameters
with every event or document processed. Values should be json-serializable.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.RemoteProcessor.processor_name">
<span class="sig-name descname"><span class="pre">processor_name</span></span><a class="headerlink" href="#mtap.RemoteProcessor.processor_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The identifier used for health checking and discovery.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.RemoteProcessor.address">
<span class="sig-name descname"><span class="pre">address</span></span><a class="headerlink" href="#mtap.RemoteProcessor.address" title="Permalink to this definition">¶</a></dt>
<dd><p>Optionally an address to use, will use service discovery configuration to locate
processors if this is None / omitted.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.RemoteProcessor.component_id">
<span class="sig-name descname"><span class="pre">component_id</span></span><a class="headerlink" href="#mtap.RemoteProcessor.component_id" title="Permalink to this definition">¶</a></dt>
<dd><p>How the processor’s results will be identified locally. Will be modified to be unique
if it is not unique relative to other component in a pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.RemoteProcessor.params">
<span class="sig-name descname"><span class="pre">params</span></span><a class="headerlink" href="#mtap.RemoteProcessor.params" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional parameter dictionary that will be passed to the processor as parameters
with every event or document processed. Values should be json-serializable.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)">dict</a>, Any]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mtap.LocalProcessor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.</span></span><span class="sig-name descname"><span class="pre">LocalProcessor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">proc</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_pipeline.html#LocalProcessor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.LocalProcessor" title="Permalink to this definition">¶</a></dt>
<dd><p>A configuration of a locally-invoked processor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>proc</strong> (<a class="reference internal" href="#mtap.EventProcessor" title="mtap.EventProcessor"><em>EventProcessor</em></a>) – The processor instance to run with the pipeline.</p></li>
<li><p><strong>component_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – How the processor’s results will be identified locally. Will be modified to be unique
if it is not unique relative to other component in a pipeline.</p></li>
<li><p><strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><em>dict</em></a><em>, </em><em>Any</em><em>]</em>) – An optional parameter dictionary that will be passed to the processor as parameters
with every event or document processed. Values should be json-serializable.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.LocalProcessor.proc">
<span class="sig-name descname"><span class="pre">proc</span></span><a class="headerlink" href="#mtap.LocalProcessor.proc" title="Permalink to this definition">¶</a></dt>
<dd><p>The processor instance to run with the pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.EventProcessor" title="mtap.EventProcessor">EventProcessor</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.LocalProcessor.component_id">
<span class="sig-name descname"><span class="pre">component_id</span></span><a class="headerlink" href="#mtap.LocalProcessor.component_id" title="Permalink to this definition">¶</a></dt>
<dd><p>How the processor’s results will be identified locally. Will be modified to be unique
if it is not unique relative to other component in a pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.LocalProcessor.params">
<span class="sig-name descname"><span class="pre">params</span></span><a class="headerlink" href="#mtap.LocalProcessor.params" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional parameter dictionary that will be passed to the processor as parameters
with every event or document processed. Values should be json-serializable.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><em>Optional</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)">dict</a>, Any]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mtap.processing.ProcessingSource">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.processing.</span></span><span class="sig-name descname"><span class="pre">ProcessingSource</span></span><a class="reference internal" href="_modules/mtap/processing/_pipeline.html#ProcessingSource"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processing.ProcessingSource" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides events or documents for the multi-threaded pipeline runner. Also has functionality
for receiving results.</p>
<dl class="py property">
<dt class="sig sig-object py" id="mtap.processing.ProcessingSource.total">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">total</span></span><a class="headerlink" href="#mtap.processing.ProcessingSource.total" title="Permalink to this definition">¶</a></dt>
<dd><p>The total number of documents this source will provide.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>str or None count of the total events or None if not known.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.processing.ProcessingSource.provide">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">provide</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">consume</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_pipeline.html#ProcessingSource.provide"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processing.ProcessingSource.provide" title="Permalink to this definition">¶</a></dt>
<dd><p>The method which provides documents for the multi-threaded runner. This method provides
documents or events to the pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>consume</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.11)"><em>Callable</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.11)"><em>Union</em></a><em>[</em><a class="reference internal" href="#mtap.Document" title="mtap.Document"><em>Document</em></a><em>, </em><a class="reference internal" href="#mtap.Event" title="mtap.Event"><em>Event</em></a><em>]</em><em>]</em>) – The consumer method to pass documents or events to process.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Example implementation for processing text documents in a directory.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">provide</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">consume</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Union</span><span class="p">[</span><span class="n">Document</span><span class="p">,</span> <span class="n">Event</span><span class="p">]],</span> <span class="kc">None</span><span class="p">]):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*.txt&quot;</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">with</span> <span class="n">file</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fio</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="n">txt</span> <span class="o">=</span> <span class="n">fio</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">event</span> <span class="o">=</span> <span class="n">Event</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">doc</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">create_document</span><span class="p">(</span><span class="s1">&#39;plaintext&#39;</span><span class="p">,</span> <span class="n">txt</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">consume</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.processing.ProcessingSource.receive_result">
<span class="sig-name descname"><span class="pre">receive_result</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_pipeline.html#ProcessingSource.receive_result"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processing.ProcessingSource.receive_result" title="Permalink to this definition">¶</a></dt>
<dd><p>Optional method: Asynchronous callback which returns the results of processing. This
method is called on a processing worker thread. Default behavior is to do nothing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>result</strong> (<a class="reference internal" href="#mtap.processing.PipelineResult" title="mtap.processing.PipelineResult"><em>PipelineResult</em></a>) – The result of processing using the pipeline.</p></li>
<li><p><strong>event</strong> (<a class="reference internal" href="#mtap.Event" title="mtap.Event"><em>Event</em></a>) – The event processed.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.processing.ProcessingSource.receive_failure">
<span class="sig-name descname"><span class="pre">receive_failure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exc</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_pipeline.html#ProcessingSource.receive_failure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processing.ProcessingSource.receive_failure" title="Permalink to this definition">¶</a></dt>
<dd><p>Optional method: Asynchronous callback which receives exceptions for any failed
documents.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>exc</strong> (<em>ProcessingError</em>) – The processing exception.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Whether the error should be suppressed and not count against maximum failures.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.processing.ProcessingSource.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_pipeline.html#ProcessingSource.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processing.ProcessingSource.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Optional method: called to clean up after processing is complete.</p>
<p>Returns:</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mtap.processing.PipelineResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.processing.</span></span><span class="sig-name descname"><span class="pre">PipelineResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">component_results</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elapsed_time</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_base.html#PipelineResult"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processing.PipelineResult" title="Permalink to this definition">¶</a></dt>
<dd><p>The result of processing an event or document in a pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>component_results</strong> (<em>List</em><em>[</em><a class="reference internal" href="#mtap.processing.ProcessingResult" title="mtap.processing.ProcessingResult"><em>ProcessingResult</em></a><em>]</em>) – The processing results for each individual
component</p></li>
<li><p><strong>elapsed_time</strong> (<a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.11)"><em>timedelta</em></a>) – The elapsed time for the entire pipeline.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.processing.PipelineResult.component_results">
<span class="sig-name descname"><span class="pre">component_results</span></span><a class="headerlink" href="#mtap.processing.PipelineResult.component_results" title="Permalink to this definition">¶</a></dt>
<dd><p>The processing results for each individual component</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="#mtap.processing.ProcessingResult" title="mtap.processing.ProcessingResult">ProcessingResult</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.processing.PipelineResult.elapsed_time">
<span class="sig-name descname"><span class="pre">elapsed_time</span></span><a class="headerlink" href="#mtap.processing.PipelineResult.elapsed_time" title="Permalink to this definition">¶</a></dt>
<dd><p>The elapsed time for the entire pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.11)"><em>timedelta</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.processing.PipelineResult.component_result">
<span class="sig-name descname"><span class="pre">component_result</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_base.html#PipelineResult.component_result"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processing.PipelineResult.component_result" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the component result for a specific identifier.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>identifier</strong> – The processor’s identifier in the pipeline.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The result for the specified processor.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.processing.ProcessingResult" title="mtap.processing.ProcessingResult">ProcessingResult</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mtap.processing.ProcessingResult">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.processing.</span></span><span class="sig-name descname"><span class="pre">ProcessingResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">result_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timing_info</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">created_indices</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_base.html#ProcessingResult"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processing.ProcessingResult" title="Permalink to this definition">¶</a></dt>
<dd><p>The result of processing one document or event.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.processing.ProcessingResult.identifier">
<span class="sig-name descname"><span class="pre">identifier</span></span><a class="headerlink" href="#mtap.processing.ProcessingResult.identifier" title="Permalink to this definition">¶</a></dt>
<dd><p>The id of the processor with respect to the pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.processing.ProcessingResult.result_dict">
<span class="sig-name descname"><span class="pre">result_dict</span></span><a class="headerlink" href="#mtap.processing.ProcessingResult.result_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>The json object returned by the processor as its results.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.processing.ProcessingResult.timing_info">
<span class="sig-name descname"><span class="pre">timing_info</span></span><a class="headerlink" href="#mtap.processing.ProcessingResult.timing_info" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary of the times taken processing this document.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.processing.ProcessingResult.created_indices">
<span class="sig-name descname"><span class="pre">created_indices</span></span><a class="headerlink" href="#mtap.processing.ProcessingResult.created_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Any indices that have been added to documents by this processor.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>, List[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mtap.processing.TimerStats">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.processing.</span></span><span class="sig-name descname"><span class="pre">TimerStats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mean</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">std</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sum</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_base.html#TimerStats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processing.TimerStats" title="Permalink to this definition">¶</a></dt>
<dd><p>Statistics about a specific keyed measured duration recorded by a <code class="xref py py-obj docutils literal notranslate"><span class="pre">Stopwatch</span></code>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.processing.TimerStats.mean">
<span class="sig-name descname"><span class="pre">mean</span></span><a class="headerlink" href="#mtap.processing.TimerStats.mean" title="Permalink to this definition">¶</a></dt>
<dd><p>The sample mean of all measured durations.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.11)"><em>timedelta</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.processing.TimerStats.std">
<span class="sig-name descname"><span class="pre">std</span></span><a class="headerlink" href="#mtap.processing.TimerStats.std" title="Permalink to this definition">¶</a></dt>
<dd><p>The sample standard deviation of all measured durations.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.11)"><em>timedelta</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.processing.TimerStats.min">
<span class="sig-name descname"><span class="pre">min</span></span><a class="headerlink" href="#mtap.processing.TimerStats.min" title="Permalink to this definition">¶</a></dt>
<dd><p>The minimum of all measured durations.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.11)"><em>timedelta</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.processing.TimerStats.max">
<span class="sig-name descname"><span class="pre">max</span></span><a class="headerlink" href="#mtap.processing.TimerStats.max" title="Permalink to this definition">¶</a></dt>
<dd><p>The maximum of all measured durations.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.11)"><em>timedelta</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.processing.TimerStats.sum">
<span class="sig-name descname"><span class="pre">sum</span></span><a class="headerlink" href="#mtap.processing.TimerStats.sum" title="Permalink to this definition">¶</a></dt>
<dd><p>The sum of all measured durations.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.11)"><em>timedelta</em></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mtap.processing.AggregateTimingInfo">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.processing.</span></span><span class="sig-name descname"><span class="pre">AggregateTimingInfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timing_info</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_base.html#AggregateTimingInfo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processing.AggregateTimingInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Collection of all the timing info for a specific processor.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.processing.AggregateTimingInfo.identifier">
<span class="sig-name descname"><span class="pre">identifier</span></span><a class="headerlink" href="#mtap.processing.AggregateTimingInfo.identifier" title="Permalink to this definition">¶</a></dt>
<dd><p>The ID of the processor with respect to the pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mtap.processing.AggregateTimingInfo.timing_info">
<span class="sig-name descname"><span class="pre">timing_info</span></span><a class="headerlink" href="#mtap.processing.AggregateTimingInfo.timing_info" title="Permalink to this definition">¶</a></dt>
<dd><p>A map from all the timer keys for the processor to the aggregated duration statistics.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)">dict</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>, <a class="reference internal" href="#mtap.processing.TimerStats" title="mtap.processing.TimerStats">TimerStats</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.processing.AggregateTimingInfo.print_times">
<span class="sig-name descname"><span class="pre">print_times</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_base.html#AggregateTimingInfo.print_times"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processing.AggregateTimingInfo.print_times" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints the aggregate timing info for all processing components using <code class="docutils literal notranslate"><span class="pre">print</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.processing.AggregateTimingInfo.csv_header">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">csv_header</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_base.html#AggregateTimingInfo.csv_header"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processing.AggregateTimingInfo.csv_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the header for CSV formatted timing data.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mtap.processing.AggregateTimingInfo.timing_csv">
<span class="sig-name descname"><span class="pre">timing_csv</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/_base.html#AggregateTimingInfo.timing_csv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.processing.AggregateTimingInfo.timing_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the timing data formatted as a string, generating each</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Generator[str]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="configuration">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="mtap.Config">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mtap.</span></span><span class="sig-name descname"><span class="pre">Config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/_config.html#Config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.Config" title="Permalink to this definition">¶</a></dt>
<dd><p>The MTAP configuration dictionary.</p>
<p>By default configuration is loaded from one of a number of locations in the following priority:</p>
<blockquote>
<div><ul class="simple">
<li><p>A file at the path of the ‘–config’ parameter passed into main methods.</p></li>
<li><p>A file at the path of the ‘MTAP_CONFIG’ environment variable</p></li>
<li><p>$PWD/mtapConfig.yml</p></li>
<li><p>$HOME/.mtap/mtapConfig.yml’</p></li>
<li><p>/etc/mtap/mtapConfig.yml</p></li>
</ul>
</div></blockquote>
<p>MTAP components will use a global shared configuration object, by entering the context of a
config object using “with”, all of the MTAP functions called on that thread will make use of
that config object.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">mtap</span><span class="o">.</span><span class="n">Config</span><span class="p">()</span> <span class="k">as</span> <span class="n">config</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">config</span><span class="p">[</span><span class="s1">&#39;key&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;value&#39;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="c1"># other MTAP methods in this</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="c1"># block will use the updated config object.</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="mtap.Config.update_from_yaml">
<span class="sig-name descname"><span class="pre">update_from_yaml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/_config.html#Config.update_from_yaml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mtap.Config.update_from_yaml" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the configuration by loading and collapsing all of the structures in a yaml file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> – The path to the yaml file to load.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table of Contents</a></h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">mtap</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#command-line-utility">Command-Line Utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="#api-documentation">API Documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">mtap.deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="serialization.html">mtap.serialization</a></li>
</ul>

  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="index.html"
                          title="previous chapter">Welcome to MTAP’s documentation!</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="deployment.html"
                          title="next chapter">mtap.deployment</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/mtap.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="deployment.html" title="mtap.deployment"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to MTAP’s documentation!"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">MTAP 1.0.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">mtap</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Regents of the University of Minnesota..
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>